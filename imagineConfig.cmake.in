# -----------------------------------------------------------------
# lvr's cmake configuration
#
# provided interface variables:
# - imagine_INCLUDE_DIRS
# - imagine_LIBRARIES
# - imagine_DEFINITIONS
# 
#
# Do not forget to add_defintions(${imagine_DEFINITIONS}) as they
# describe the build configuration of liblvr.
#
# -----------------------------------------------------------------
@PACKAGE_INIT@

#include("${CMAKE_CURRENT_LIST_DIR}/imagineTargets.cmake")



###########
### INCLUDE
###########
set(imagine_INCLUDE_DIRS @CMAKE_INSTALL_INCLUDEDIR@)

###########
### LIBRARY
###########

# CORE LIB
set(imagine_LIBRARIES imagine)

# CUDA LIB
if(@CUDA_FOUND@)
list(APPEND imagine_LIBRARIES imagine_cuda)
endif(@CUDA_FOUND@)

# OptiX LIB
if(@OptiX_FOUND@)
list(APPEND imagine_LIBRARIES imagine_optix)
endif(@CUDA_FOUND@)

set(imagine_DEFINITIONS @imagine_DEFINITIONS@)


############
### EXTERNAL
############

# OpenMP
find_package(OpenMP REQUIRED)
if(OPENMP_FOUND)
    set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${OpenMP_C_FLAGS}")
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${OpenMP_CXX_FLAGS}")
    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} ${OpenMP_EXE_LINKER_FLAGS}")
endif(OPENMP_FOUND)

# Assimp
find_package(assimp REQUIRED)
list(APPEND imagine_INCLUDE_DIRS ${ASSIMP_INCLUDE_DIRS})
list(APPEND imagine_LIBRARIES ${ASSIMP_LIBRARIES})

# Eigen
find_package(Eigen3 REQUIRED)
list(APPEND imagine_INCLUDE_DIRS ${EIGEN3_INCLUDE_DIR})

# Embree
find_package(embree 3 REQUIRED)
if(NOT embree_LIBRARY)
    if(EMBREE_LIBRARY)
        set(embree_LIBRARY ${EMBREE_LIBRARY})
    elseif(Embree_LIBRARY)
        set(embree_LIBRARY ${Embree_LIBRARY})
    else()
        set(embree_LIBRARY embree)
    endif()
endif()

list(APPEND imagine_LIBRARIES ${embree_LIBRARY})

# CUDA
find_package(CUDA)
if(CUDA_FOUND)
    list(APPEND imagine_INCLUDE_DIRS ${CUDA_INCLUDE_DIRS})
    list(APPEND imagine_LIBRARIES ${CUDA_LIBRARIES})
    list(APPEND imagine_LIBRARIES ${CUDA_CUDA_LIBRARY})
endif(CUDA_FOUND)

#cmake_policy(POP)

set(imagine_FOUND TRUE)